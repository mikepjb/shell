#!/usr/bin/env bash

set -e

if [[ -f "Makefile" ]]; then
    make test
    exit 0
fi

if [[ -f "pom.xml" ]]; then
    pkg_name="dummy-package-name"
    test_class="dummy-test-class"

    # for pom.xml/maven + java projects
    mvn test -Dtest=$test_class -pl $pkg_name -am -DfailIfNoTests=false
    exit 0
fi

if [[ -f "go.mod" ]]; then
    go test ./...
    exit 0
fi

echo 'no tests found'
